function GlPairs(r){"use strict";GlPairs.arrPairs[r]=this;var _=r,s=null,a={},i=null,o=null,n="",l=!1,d=null,u={upperCardChoosed:!1,lowerCardChoosed:!1,upperExtId:0,lowerExtId:0},c=null,C=null,R=0,p=2e4,I=1e4,T=500,P=500,S=5,E=1,f=!1,A=0;function h(){return"#"+_+"_glpairs_container"}function g(r){var t=0,e={pairsId:0,extId:0,area:"",suffix:""},t=r.indexOf("_");return e.pairsId=r.substr(0,t),t=(r=r.substr(++t)).indexOf("_"),e.pairsId=e.pairsId+"_"+r.substr(0,t),t=(r=r.substr(++t)).indexOf("_"),e.extId=r.substr(0,t),t=(r=r.substr(++t)).indexOf("_"),e.area=r.substr(0,t),e.suffix=r.substr(++t),e}function x(r,t,e,i){var a=null,s=0,e=D(r,t,e),a=jQuery(e),s=Math.round(T/100);a.css("transition","all "+(s/=10)+"s"),i?a.css({transform:"rotateY( 0deg )","-moz-transform":"rotateY( 0deg )","-ms-transform":"rotateY( 0deg )","-o-transform":"rotateY( 0deg )","-webkit-transform":"rotateY( 0deg )"}):a.css({transform:"rotateY( 180deg )","-moz-transform":"rotateY( 180deg )","-ms-transform":"rotateY( 180deg )","-o-transform":"rotateY( 180deg )","-webkit-transform":"rotateY( 180deg )"})}function G(r,t){t=void 0!==t&&t;var e=null,r=function(r,t,e,i){var a="",s="",o="";0!==e&&(s="height: "+e+"px;");0!==i&&(o="width: "+i+"px;");0===e&&0===i||(a='style="'+s+" "+o+'"');return['<div id="modalwindow" class="modal fade" role="dialog"',a,">",'<div class="modal-dialog" role="document">','<div class="modal-content"',a,">",'<div class="modal-body">',"<div>",t,"</div>","<div>",r,"</div>","</div>",'<div class="modal-footer">','<button type="button" class="btn btn-default"','data-bs-dismiss="modal">OK</button>',"</div>","</div>","</div>","</div>"].join("\n")}(r.content,function(r){var t=null,e="",i="";if(n==GlPairs.C_INT_PAIRS_TYPE_TextOnly)return e;i=GlPairs.C_STR_AREA_UPPER,1==(t=jQuery(D(u.upperExtId,i,GlPairs.C_STR_ID_SUFFIX_FRONT_CARD))).length&&"IMG"==t.prop("nodeName")&&(e=m(t,r));if(n==GlPairs.C_INT_PAIRS_TYPE_SamePic)return e;1==(t=jQuery(D(u.lowerExtId,X(i),GlPairs.C_STR_ID_SUFFIX_FRONT_CARD))).length&&"IMG"==t.prop("nodeName")&&(e+=m(t,r));return e}(r),r.height,r.width);(e=jQuery(r).modal({show:!1})).on("hidden.bs.modal",function(){t||b()}),e.modal("show")}function m(r,t){var e=null;return(e=r.clone()).css("border-width","0px"),e.removeClass("glpairs_cls_card_border_right"),e.attr("id",""),e.css("padding","10px"),0===t.picwidth?e.css("width",""):e.css("width",t.picwidth),0===t.picheight?e.css("height",""):e.css("height",t.picheight),e.prop("outerHTML")}function v(r){var t=GlPairs.C_STR_AREA_UPPER;e(jQuery(D(u.upperExtId,t,GlPairs.C_STR_ID_SUFFIX_FRONT_CARD)),r),e(jQuery(D(u.lowerExtId,X(t),GlPairs.C_STR_ID_SUFFIX_FRONT_CARD)),r)}function D(r,t,e){return"#"+_+"_"+r+"_"+t+"_"+e}function e(r,t){if(void 0===e.counter&&(e.counter=[]),void 0===e.counter[r.attr("id")]&&(e.counter[r.attr("id")]=0),0===e.counter[r.attr("id")])return e.counter[r.attr("id")]++,void window.setTimeout(function(){e(r,t)},T);4!=e.counter[r.attr("id")]++?(r.toggleClass(GlPairs.C_STR_CARD_BORDER_CLASS_DEFAULT),r.toggleClass(t),window.setTimeout(function(){e(r,t)},200)):e.counter[r.attr("id")]=0}function w(r){var t=null,e="#"+_+"_"+GlPairs.C_STR_ID_SUFFIX_RESULT,t=jQuery(e),e=parseInt(t.text());t.text(e+=r),r<0?(t.toggleClass("glpairs_cls_result_negative"),window.setTimeout(function(){t.toggleClass("glpairs_cls_result_negative")},1e3)):(t.toggleClass("glpairs_cls_result_positive"),window.setTimeout(function(){t.toggleClass("glpairs_cls_result_positive")},1e3))}function F(){u.upperCardChoosed=!1,u.lowerCardChoosed=!1,u.upperExtId=0,u.lowerExtId=0}function y(){var r,t,e="";e=(e=d.gameFinished).replace("&1",(r=null,t="#"+_+"_"+GlPairs.C_STR_ID_SUFFIX_RESULT,r=jQuery(t),parseInt(r.text()))),jQuery(Q(e)).modal()}function U(){var r=Math.random();return Math.round(10*r+10)}function j(r,t){var e=null,i=D(r,t,GlPairs.C_STR_ID_SUFFIX_FRONT),e=jQuery(i);a[r]?(x(r,t,GlPairs.C_STR_ID_SUFFIX_BACK,!0),x(r,t,GlPairs.C_STR_ID_SUFFIX_FRONT,!1),e.css("opacity","0.0"),e.css("visibility","hidden"),a[r]=!1):(e.css("opacity","1.0"),e.css("visibility","visible"),x(r,t,GlPairs.C_STR_ID_SUFFIX_BACK,!1),x(r,t,GlPairs.C_STR_ID_SUFFIX_FRONT,!0),a[r]=!0)}function b(){var t,e,r,i,a;s[u.upperExtId]==s[u.lowerExtId]?(w(S),e=t=null,a=GlPairs.C_STR_AREA_UPPER,(t=jQuery(D(u.upperExtId,a,GlPairs.C_STR_ID_SUFFIX_BACK))).on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(r){GlPairs.glpairsEventHandler(_,r,"onTurnBackCardEnd",t)}),(e=jQuery(D(u.lowerExtId,X(a),GlPairs.C_STR_ID_SUFFIX_BACK))).on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(r){GlPairs.glpairsEventHandler(_,r,"onTurnBackCardEnd",e)}),--R):w(-1*E),r=null,i="",i=s[u.upperExtId]==s[u.lowerExtId]?GlPairs.C_STR_CARD_BORDER_CLASS_RIGHT:GlPairs.C_STR_CARD_BORDER_CLASS_WRONG,a=GlPairs.C_STR_AREA_UPPER,j(u.upperExtId,a),(r=jQuery(D(u.upperExtId,a,GlPairs.C_STR_ID_SUFFIX_FRONT_CARD))).toggleClass(GlPairs.C_STR_CARD_BORDER_CLASS_DEFAULT),r.toggleClass(i),j(u.lowerExtId,X(a)),(r=jQuery(D(u.lowerExtId,X(a),GlPairs.C_STR_ID_SUFFIX_FRONT_CARD))).toggleClass(GlPairs.C_STR_CARD_BORDER_CLASS_DEFAULT),r.toggleClass(i),F(),0===R&&window.setTimeout(function(){y()},T+P+200)}function O(r){var t=s[r];return r!=i[t][GlPairs.C_STR_ARR_ID_EXT_ID1]?i[t][GlPairs.C_STR_ARR_ID_EXT_ID1]:i[t][GlPairs.C_STR_ARR_ID_EXT_ID2]}function X(r){return l&&r==GlPairs.C_STR_AREA_UPPER?GlPairs.C_STR_AREA_LOWER:GlPairs.C_STR_AREA_UPPER}function Q(r){return['<div class="modal fade" tabindex="-1" aria-hidden="true" id="thulinModal">','<div class="modal-dialog">','<div class="modal-content">','<div class="modal-body">',"<p>",r,"</p>","</div>",'<div class="modal-footer">','<button type="button" class="btn btn-primary"','data-bs-dismiss="modal">OK</button>',"</div>","</div>","</div>","</div>"].join("\n")}this.requestAjaxGeneralPairsData=function(){var r=jQuery.param({controllerName:"Pairs",actionName:"ajaxBasicData",actionArguments:{i_strUniquId:_}});this.setAjaxWaitParams(!0),jQuery.ajax({url:"/?PSR-15-eID=glpairs&"+r,dataType:"json"}).done(function(r){GlPairs.glpairsHandleAjaxResponse("processAjaxGeneralPairsData",r)})},this.processAjaxGeneralPairsData=function(r){var e,t;s=r.result.arrExtIdMap,i=r.result.arrUidMap,n=r.result.pairsType,l=r.result.splitmode,d=r.result.i18n,R=r.result.pairscount,S=r.result.pluspoints,E=r.result.minuspoints,p=r.result.turnbackdelay,I=r.result.hintdelay,T=r.result.turnduration,P=r.result.stackduration,f=r.result.testmode,A=r.result.testmodeturndelay,o=r.result.finalinformation,function(){for(var r in s)s.hasOwnProperty(r)&&(a[r]=!1)}(),f&&(t="",e=[],t=h(),jQuery(t).find(".glpairs_cls_click_content").each(function(r){var t=g(jQuery(this).attr("id"));e.push(t)}),function r(t){var e={};if(0===t.length)return void jQuery(Q(d.testmode)).modal();e=t.shift();j(e.extId,e.area);window.setTimeout(function(){r(t)},A)}(e)),t="",t=h(),jQuery(t).find(".glpairs_cls_click_content").each(function(r){var t=jQuery(this);t.click(function(r){GlPairs.glpairsEventHandler(_,r,"onMouseClickCard",t)})})},this.setAjaxWaitParams=function(r){var t=h();!0===r?(jQuery(t).css("cursor","wait"),0):jQuery(t).css("cursor","auto")},this.onMouseClickCard=function(r,t){var e,i,a=g(t.attr("id"));f&&o[s[a.extId]].isActive?((i=a).area==GlPairs.C_STR_AREA_UPPER?(u.upperCardChoosed=!0,u.upperExtId=i.extId,u.lowerCardChoosed=!0,u.lowerExtId=O(i.extId)):(u.lowerCardChoosed=!0,u.lowerExtId=i.extId,u.upperCardChoosed=!0,u.upperExtId=O(i.extId)),G(o[s[a.extId]],f),F()):f&&!1===o[s[a.extId]].isActive?(j(a.extId,a.area),j(O(a.extId),X(a.area))):function(r){var t=!0,e=null;u.upperCardChoosed&&u.lowerCardChoosed||u.upperExtId==r.extId||u.lowerExtId==r.extId?t=!1:l?r.area==GlPairs.C_STR_AREA_UPPER?u.upperCardChoosed?(t=!1,e=null,e=jQuery(Q(d.errorWrongCardClickedUpper)),new bootstrap.Modal(e).show()):(u.upperCardChoosed=!0,u.upperExtId=r.extId):r.area==GlPairs.C_STR_AREA_LOWER&&(u.lowerCardChoosed?(t=!1,e=jQuery(Q(d.errorWrongCardClickedLower)),new bootstrap.Modal(e).show()):(u.lowerCardChoosed=!0,u.lowerExtId=r.extId)):u.upperCardChoosed?(u.lowerCardChoosed=!0,u.lowerExtId=r.extId):(u.upperCardChoosed=!0,u.upperExtId=r.extId);return t}(a)&&(e=null,i=t="",u.upperCardChoosed&&u.lowerCardChoosed&&s[u.upperExtId]==s[u.lowerExtId]&&(i=GlPairs.C_STR_AREA_UPPER,t=D(u.upperExtId,i,GlPairs.C_STR_ID_SUFFIX_CARD_OVERALL),(e=jQuery(t)).unbind("click"),e.css("cursor","auto"),t=D(u.lowerExtId,X(i),GlPairs.C_STR_ID_SUFFIX_CARD_OVERALL),(e=jQuery(t)).unbind("click"),e.css("cursor","auto")),j(a.extId,a.area),u.upperCardChoosed&&u.lowerCardChoosed&&(s[u.upperExtId]==s[u.lowerExtId]?v(GlPairs.C_STR_CARD_BORDER_CLASS_RIGHT):v(GlPairs.C_STR_CARD_BORDER_CLASS_WRONG),s[u.upperExtId]==s[u.lowerExtId]&&o[s[u.upperExtId]].isActive?window.setTimeout(function(){G(o[s[u.upperExtId]])},T):window.setTimeout(function(){!function(t){var r=null,e=null,i="";i=h(),r=jQuery(i),e=jQuery("<div/>",{id:_+"_overlay",style:"width: "+r.width()+"px;height: "+r.height()+"px;top: "+r.position().top+"px;left: "+r.position().left+"px;opacity: 1;position: absolute;"}),r.append(e),e.click(function(r){GlPairs.glpairsEventHandler(_,r,t,e)}),0!==p&&(c=window.setTimeout(function(){e.trigger("click")},p));0!==I&&(C=window.setTimeout(function(){!function(){var r=null,t=null,e=0,i=0;r=jQuery(h()),(t=jQuery("<div />",{id:_+"_"+GlPairs.C_STR_ID_SUFFIX_CLICK_HINT,class:"glpairs_cls_click_hint",style:"top: "+(r.height()+r.position().top)+"px; "})).html(d.clickHint),r.append(t),(e=r.width()-t.width())<0&&(e=0);e=Math.round(e/2),t.css("left",e),i=10*r.height(),t.animate({top:"-="+r.height()},i,"linear").animate({opacity:0},500,function(){t.remove()})}()},I))}("onMouseClickOverlayPairFinished")},T)))},this.onMouseClickOverlayPairFinished=function(r,t){window.clearTimeout(c),window.clearTimeout(C),t.remove(),jQuery("#"+_+"_"+GlPairs.C_STR_ID_SUFFIX_CLICK_HINT).remove(),b()},this.onTurnBackCardEnd=function(r,t){var e,i,a,s,o,n,l;e=t,i=null,t=l=n=o=s=a=0,i=jQuery("#"+_+"_"+GlPairs.C_STR_ID_SUFFIX_CARD_STACK),o=U(),n=U(),l=i.offset().top,t=e.offset().top,a=l-t+o,l=i.offset().left,t=e.offset().left,s=l-t+n,e.css("position","relative"),e.removeClass("glpairs_cls_card_visible"),e.removeClass("glpairs_cls_card_common"),e.css("transition",""),e.animate({top:"+="+a,left:"+="+s},{duration:P,easing:"linear"}),window.setTimeout(function(){var r,t;r=e,t=0,t=Math.random(),t=Math.round(2e3*t-1e3)/100,r.css("transform","rotateZ( "+t+"deg )"),r.css("-ms-transform","rotateZ( "+t+"deg )"),r.css("-moz-transform","rotateZ( "+t+"deg )"),r.css("-webkit-transform","rotateZ( "+t+"deg )"),r.css("-o-transform","rotateZ( "+t+"deg )")},P/2)}}GlPairs.C_STR_ARR_ID_EXT_ID1="extID1",GlPairs.C_STR_ARR_ID_EXT_ID2="extID2",GlPairs.C_INT_PAIRS_TYPE_SamePic=0,GlPairs.C_INT_PAIRS_TYPE_2Pic=1,GlPairs.C_INT_PAIRS_TYPE_PicText=2,GlPairs.C_INT_PAIRS_TYPE_TextOnly=3,GlPairs.C_STR_AREA_UPPER="upper",GlPairs.C_STR_AREA_LOWER="lower",GlPairs.C_STR_CARD_BORDER_CLASS_DEFAULT="glpairs_cls_card_border",GlPairs.C_STR_CARD_BORDER_CLASS_WRONG="glpairs_cls_card_border_wrong",GlPairs.C_STR_CARD_BORDER_CLASS_RIGHT="glpairs_cls_card_border_right",GlPairs.C_STR_ID_SUFFIX_FRONT="div_card_front",GlPairs.C_STR_ID_SUFFIX_BACK="div_card_back",GlPairs.C_STR_ID_SUFFIX_RESULT="glpairs_result",GlPairs.C_STR_ID_SUFFIX_FRONT_CARD="front_card",GlPairs.C_STR_ID_SUFFIX_TD_CONTAINER="td_card",GlPairs.C_STR_ID_SUFFIX_TD_CONTAINER="td_card",GlPairs.C_STR_ID_SUFFIX_CARD_STACK="glpairs_card_stack",GlPairs.C_STR_ID_SUFFIX_CARD_OVERALL="overall_card",GlPairs.C_STR_ID_SUFFIX_IMG_BACK="img_back",GlPairs.C_STR_ID_SUFFIX_CLICK_HINT="glpairs_click_hint",GlPairs.arrPairs=[],GlPairs.glpairsInit=function(r){"use strict";jQuery.each(r,function(r,t){new GlPairs(t).requestAjaxGeneralPairsData()})},GlPairs.glpairsHandleAjaxResponse=function(r,t){"use strict";var e=GlPairs.arrPairs[t.strUniqueId];e.setAjaxWaitParams(!1),e[r](t)},GlPairs.glpairsEventHandler=function(r,t,e,i){"use strict";GlPairs.arrPairs[r][e](t,i)},GlPairs.glpairsInit(arrGlpairsIds);
//# sourceMappingURL=glpairs.min.js.map
